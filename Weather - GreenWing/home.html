
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenWing | Home</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü™Ω</text></svg>">
    <link rel="stylesheet" href="./weatherapp.css">
</head>
<body>
    <div class="container">
        <div class="logo"><img src="./GreenWing_Logo.png" alt="logo"></div>
        <div class="weather__header">
            <form class="weather__search">
                <input type="text" placeholder="GreenWing..." class="weather__searchform">
                <i class="fa-solid fa-magnifying-glass"></i>
            </form> 
        </div>
        <div class="weather__body">
            <h1 class="weather__city"></h1>
            <div class="weather__datetime">
            </div>
            <div class="weather__forecast"></div>
            <div class="weather__icon">
            </div>
            <p class="weather__temperature">
            </p>
            <div class="weather__minmax">
                <p>Min: 12&#176</p>
                <p>Max: 16&#176</p>
            </div>
        </div>

        <div class="weather__info">
        
            
            <div class="weather__card">
                <i class="fa-solid fa-temperature-high"></i>
                <div>
                    <p>Real Time Temperature</p>
                    <p class="real-time-temp">99&#176 C</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-temperature-full"></i>
                <div>
                    <p>Feels Like üåê</p>
                    <p class="weather__realfeel">18&#176</p>
                </div>
            </div>
            
            <div class="weather__card">
                <i class="fa-solid fa-water"></i>
                <div>
                    <p>Real Time Humidity</p>
                    <p class="real-time-humidity">99.9%</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-droplet"></i>
                <div>
                    <p>Humidity üåê</p>
                    <p class="weather__humidity">18&#176</p>
                </div>
            </div>

            <div class="weather__card">
                <i class="fa-solid fa-wind"></i>
                <div>
                    <p>Real Time Wind Speed</p>
                    <p class="real__wind">18 km/h</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-wind"></i>
                <div>
                    <p>Wind Speed üåê</p>
                    <p class="weather__wind">18&#176</p>
                </div>
            </div>
            
            <div class="weather__card">
                <i class="fa-solid fa-umbrella"></i>
                <div>
                    <p>Real Time Rain</p>
                    <p class="real__rain">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-solid fa-cloud-rain"></i>
                <div>
                    <p>Rain üåê</p>
                    <p class="weather__rain">18&#176</p>
                </div>
            </div>  
            <div class="weather__card">
                <i class="fa-solid fa-plant-wilt"></i>
                <div>
                    <p>Real Time Soil Moisture</p>
                    <p class="real__soil">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-solid fa-gauge-high"></i>
                <div>
                    <p>Pressure üåê</p>
                    <p class="weather__pressure">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-solid fa-sun-plant-wilt"></i>
                <div>
                    <p>Real Time Solar Intensity</p>
                    <p class="real__sun">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-solid fa-car-battery"></i>
                <div>
                    <p>Battery Level</p>
                    <p class="battery__level">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-solid fa-plug-circle-bolt"></i>
                <div>
                    <p>Circuit Power Status</p>
                    <p class="battery_charging">18&#176</p>
                </div>
            </div> 
            <div class="weather__card">
                <i class="fa-regular fa-clock"></i>
                <div>
                    <p>Last Sensor Data,</p>
                    <p class="real-time">time</p>
                </div>
            </div>          
        </div>
        <div style="text-align: center; font-size: 0.8em; margin-top: 1rem;">
            <p> Source - Openweather API | Real Time Location - University of Kelaniya, Sri Lanka</p>
        </div>
    </div>
    <script src="https://kit.fontawesome.com/a692e1c39f.js" crossorigin="anonymous"></script>   
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('./getdata.php')
              .then(response => {
                if (!response.ok) {
                  throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
              })
              .then(data => {
                console.log('Data received:', data);

                // Update HTML elements with data
                document.querySelector('.real-time-temp').textContent = data.temperature + '¬∞C';
                document.querySelector('.real-time-humidity').textContent = data.humidity + '%';
                document.querySelector('.real__wind').textContent = data.wind + ' km/h';
                document.querySelector('.real__rain').textContent = data.rain + ' %';
                document.querySelector('.real__soil').textContent = data.soil_moisture + ' %';
                document.querySelector('.real__sun').textContent = data.light_intensity+ ' %';
                document.querySelector('.battery__level').textContent = data.battery_percentage + ' %';
                document.querySelector('.battery_charging').textContent = data.battery_status;
                // Assuming you have other elements to update, for example:
                
                
                // Formatting the date
                var createdDate = new Date(data.created_date);
                var weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                var formattedDate = weekdays[createdDate.getDay()] + ', ' +
                                    months[createdDate.getMonth()] + ' ' +
                                    createdDate.getDate() + ', ' +
                                    createdDate.getFullYear() + ' at ' +
                                    ('0' + createdDate.getHours()).slice(-2) + ':' +
                                    ('0' + createdDate.getMinutes()).slice(-2);
                document.querySelector('.real-time').textContent = formattedDate;
              })
              .catch(error => {
                console.error('Error fetching data:', error);
              });
        });
    </script>
    <script src="./weatherapp.js"></script>
</body>
</html>