
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenWing | Home</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸª½</text></svg>">
    <link rel="stylesheet" href="../assets/css/weatherapp.css">
</head>
<body>
    <div class="container">
        <div class="weather__header">
            <form class="weather__search">
                <input type="text" placeholder="GreenWing..." class="weather__searchform">
                <i class="fa-solid fa-magnifying-glass"></i>
            </form> 
        </div>
        <div class="weather__body">
            <h1 class="weather__city"></h1>
            <div class="weather__datetime">
            </div>
            <div class="weather__forecast"></div>
            <div class="weather__icon">
            </div>
            <p class="weather__temperature">
            </p>
            <div class="weather__minmax">
                <p>Min: 12&#176</p>
                <p>Max: 16&#176</p>
            </div>
        </div>

        <div class="weather__info">
        
            <div class="weather__card">
                <i class="fa-solid fa-temperature-full"></i>
                <div>
                    <p>Feels Like</p>
                    <p class="weather__realfeel">18&#176</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-temperature-high"></i>
                <div>
                    <p>Real Time Temperature</p>
                    <p class="real-time-temp">99&#176 C</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-droplet"></i>
                <div>
                    <p>Humidity</p>
                    <p class="weather__humidity">18&#176</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-water"></i>
                <div>
                    <p>Real Time Humidity</p>
                    <p class="real-time-humidity">99.9%</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-wind"></i>
                <div>
                    <p>Wind</p>
                    <p class="weather__wind">18&#176</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-solid fa-gauge-high"></i>
                <div>
                    <p>Pressure</p>
                    <p class="weather__pressure">18&#176</p>
                </div>
            </div>  
            <div class="weather__card">
                <i class="fa-solid fa-clock"></i>
                <div>
                    <p>Last API Data,</p>
                    <p class="weather__lasttime">18&#176</p>
                </div>
            </div>
            <div class="weather__card">
                <i class="fa-regular fa-clock"></i>
                <div>
                    <p>Last Sensor Data,</p>
                    <p class="real-time">time</p>
                </div>
            </div>          
        </div>
    </div>
    <script src="https://kit.fontawesome.com/a692e1c39f.js" crossorigin="anonymous"></script>
    <script src="../assets/js/weatherapp.js"></script>
    <script>
        // Fetch data from PHP script
        console.log('Making a request to getData.php');

fetch('../assets/php/getData.php')
  .then(response => {
    // Check if the response is ok (status code 200-299)
    if (!response.ok) {
      throw new Error('Network response was not ok ' + response.statusText);
    }
    return response.json();
  })
  .then(data => {
    console.log('Data received:', data);
    // Update the content of the HTML elements with the latest data
    document.querySelector('.real-time-temp').innerHTML = data.temperature + '&#176;C';
    document.querySelector('.real-time-humidity').innerHTML = data.humidity + '%';

    // Create a Date object from the returned string
    var createdDate = new Date(data.created_date);

    // Create an array of weekday names and month names
    var weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    // Format the date string
    var formattedDate = weekdays[createdDate.getDay()] + ', ' +
                        months[createdDate.getMonth()] + ' ' +
                        createdDate.getDate() + ', ' +
                        createdDate.getFullYear() + ' at ' +
                        ('0' + createdDate.getHours()).slice(-2) + ':' +
                        ('0' + createdDate.getMinutes()).slice(-2);

    // Update the HTML element with the formatted date
    document.querySelector('.real-time').innerHTML = formattedDate;
  })
  .catch(error => {
    // Log any errors to the console
    console.error('Error fetching data:', error);
  });
    </script>
</body>
</html>